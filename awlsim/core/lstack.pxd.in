from awlsim.core.memory cimport *

cdef struct LStackFrame:
	uint32_t byteOffset
	uint32_t allocBits
	LStackFrame *prevFrame

cdef class LStackAllocator(object):
	cdef public AwlMemory memory
	cdef public uint32_t maxAllocBits
	cdef public uint32_t globAllocBits

	cdef LStackFrame *topFrame
	cdef public topFrameOffset

	cdef resize(self, uint32_t maxAllocBytes)
	cdef reset(self)

	cdef enterStackFrame(self)
	cdef exitStackFrame(self)

	cdef AwlOffset alloc(self, uint32_t nrBits)
